<menunav></menunav>

  <div class="span6 fondo-color">
    <!--color linea del menu-->
    <nav class="navbar navbar-light" color="purple;" style="background-color: #90A5B3;">
        <a class="navbar-brand">
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong">
            Registra un nuevo Estatus</button>                             
        </a>
    <!--Buscador-->
        <form class="form-inline">
          <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search"
          #ipcEstatus="ngModel" name="ipcBusqueda" [(ngModel)]='ipcBusqueda'>
          <button class="btn btn-outline-primary my-2 my-sm-0" (click)="busqueda()" type="submit">Search</button>
        </form>
      </nav>
    
<div class="text" >       
<div class="container-fluid">
<!--Modal-- Formulario para crear un nuevo estatus-->                     
<form class="form-row" #formNuevo ="ngForm" (ngSubmit) = "crear()" id ="formNuevo">
  <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Nuevo estatus de tarea</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
        </div> 
            <div class="modal-body">
              <div class="form-group ">
                  <p>
                      <!--<label>ID</label>
                      <input type="text" class="form-control" placeholder="Nombre del estatus" required autofocus
                      #cEstatus="ngModel" name="cEstatus" [(ngModel)] = "_nuevo.iEstatus">
                   </p>-->
                <p>
                   <label>Estatus</label>
                   <input type="text" class="form-control" placeholder="Nombre del estatus" required autofocus
                   #cEstatus="ngModel" name="cEstatus" [(ngModel)] = "_nuevo.cEstatus">
                </p>
              </div>
                  
              <br>                      
              </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                  <button type="submit" (click)="refresh()" class="btn btn-primary">Guardar</button>
                </div>
            </div>    
      </div>
    </div>
</form>

<div class="table-responsive-xl">
    <table class="table table-hover">
     
        <tr class="table-primary">
          <th>Id Estatus</th>
          <th>Estatus</th>
          <th>Activo</th>
        </tr>
     
      
    <tbody>
      <!-- imprime valores variable html let of array ts-->
        <tr *ngFor="let ctEstTarea of _catEstTareas">
            <td>{{ctEstTarea.iEstatus}}</td>
            <td>{{ctEstTarea.cEstatus}}</td>
            <td>{{ctEstTarea.lActivo ? "Si":"No"}}</td>
          
          
            <!--Modal-- Formulario para Editar ccc-->                     
            <td>  
                <button type="text" value="Texto" readonly  (click)="registro(ctEstTarea.iEstatus)" class="btn btn-sm btn-primary" data-toggle="modal" data-target="#modificar">
                Editar</button> 
                
                <form class="form-row" #formEditar ="ngForm" id ="formEditar" (ngSubmit) = "modificar()">
                  <div class="modal fade" id="modificar"  tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                      <div class="modal-dialog" role="document">
                        <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">Estatus de tarea</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                        </div> 
                            <div class="modal-body">
                              <div class="form-group ">
                                  <p>
                                      <label>ID</label>
                                      <input type="text" readonly onmousedown="return false;" class="form-control" placeholder="Nombre del estatus" required autofocus
                                      #_catEstTarea.iEstatus="ngModel" name="iEstatus" [(ngModel)]= "_catEstTarea.iEstatus">                                                                                      
                                  </p>
                                <p>
                                  <label>Estatus</label>
                                  <input type="text" class="form-control" placeholder="Nombre del estatus" required autofocus
                                  #cEstatus="ngModel" name="cEstatus"  [(ngModel)] = "_catEstTarea.cEstatus" >                                                                                      
                                </p>
                                <p>
                                  <label>Activo</label>
                                  <input type="checkbox" readonly onmousedown="return false;"  aria-label="Text input with checkbox" required autofocus
                                  #lActivo="ngModel" name="lActivo"   [(ngModel)] = "_catEstTarea.lActivo" >                                                                                      
                                </p>
                              </div>
                                  
                              <br>                      
                              </div>
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                                  <button type="submit" (click)="refresh()" class="btn btn-primary">Guardar</button>
                                </div>
                          </div>    
                      </div>
                  </div>
                </form>                             
            </td>

            <!--Borrar--Se concatena el iEstatus para podel eliminar por regsitro-->
            <td> 
              <a href="#exampleModal-{{ctEstTarea.iEstatus}}" role="button" 
                class="btn btn-sm btn-danger" data-toggle="modal" >
                 Eliminar
              </a>     
              
               <!-- Modal--borrar estatus-->  
              <div class="modal fade" id="exampleModal-{{ctEstTarea.iEstatus}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Eliminar el estatus</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                          Â¿Estas seguro que quieres borrar el ID 
                          <strong>{{ctEstTarea.iEstatus}} estatus {{ctEstTarea.cEstatus}} </strong> ?
                        </div>
                      
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                          <button type="submit" (click)="eliminar(ctEstTarea.iEstatus)" (click)="refresh()" role="button" class="btn btn-danger">Eliminar</button>
                        </div>
                      </div>
                  </div>
                </div>
              
            </td>                                      
        </tr>
                    
    </tbody>
  </table>
</div>
</div>



 
      
      

      
